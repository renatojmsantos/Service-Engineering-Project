{"ast":null,"code":"var _jsxFileName = \"/Users/renatosantos/Dropbox/Aplicativos/NONIO-Inforestudante/Licenciatura em Engenharia Informa\\u0301tica/2019 2020/2.\\xBA Semestre/Engenharia de Servic\\u0327os/Service-Engineering-Project/src/LoginPage.js\";\nimport React, { Component } from \"react\";\nimport ReactDom from 'react-dom';\nimport App from './App';\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      login: '',\n      password: ''\n    };\n    this.handleLoginChange = this.changeLogin.bind(this);\n    this.handlePasswordChange = this.changePassword.bind(this);\n  }\n\n  changeLogin(event) {\n    this.setState({\n      login: event.target.value\n    });\n  }\n\n  changePassword(event) {\n    this.setState({\n      password: event.target.value\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 17\n      }\n    }, \"ES - Project #2\"), \"Login \", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.login,\n      onChange: this.handleLoginChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 23\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 103\n      }\n    }), \"Password \", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      value: this.state.password,\n      onChange: this.handlePasswordChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 26\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 116\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"button\",\n      value: \"submit\",\n      onClick: this.props.login.bind(this.props.parent, this.state.login, this.state.password),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nclass LoginPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: undefined,\n      errormessage: undefined\n    };\n  }\n\n  authenticated(token) {\n    this.setState({\n      token: token,\n      errormessage: undefined\n    });\n  }\n\n  failedauthenticated() {\n    this.setState({\n      token: undefined,\n      errormessage: 'Authentication Error'\n    });\n  }\n\n  doLogin(login, password) {\n    var theobject = this;\n    var formparameters = {\n      method: 'POST',\n      //para nao ficar visivel\n      body: JSON.stringify({\n        'login': login,\n        'password': password\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    fetch(this.props.loginserver, formparameters).then(function (data) {\n      if (data.status !== 200) {\n        theobject.failedauthenticated();\n        throw new Error(data.status);\n      } else {\n        var json = data.json();\n        return json;\n      }\n    }).then(function (thetoken) {\n      console.log('message =', thetoken);\n      if ('token' in thetoken) theobject.authenticated(thetoken['token']);\n    }).catch(function (error) {\n      console.log('There has been a problem with your fetch operation: ', error.message);\n    });\n  }\n\n  render() {\n    console.log(this.state.token);\n    if (this.state.errormessage != undefined) var errormessage = /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 32\n      }\n    }, this.state.errormessage);else var errormessage = /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 32\n      }\n    });\n    if (this.state.token == undefined) return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }\n    }, errormessage, /*#__PURE__*/React.createElement(Login, {\n      parent: this,\n      login: this.doLogin,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }\n    }));else return /*#__PURE__*/React.createElement(App, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }\n    });\n  }\n\n}\n\nexport default LoginPage;","map":{"version":3,"sources":["/Users/renatosantos/Dropbox/Aplicativos/NONIO-Inforestudante/Licenciatura em Engenharia Informática/2019 2020/2.º Semestre/Engenharia de Serviços/Service-Engineering-Project/src/LoginPage.js"],"names":["React","Component","ReactDom","App","Login","constructor","props","state","login","password","handleLoginChange","changeLogin","bind","handlePasswordChange","changePassword","event","setState","target","value","render","parent","LoginPage","token","undefined","errormessage","authenticated","failedauthenticated","doLogin","theobject","formparameters","method","body","JSON","stringify","headers","fetch","loginserver","then","data","status","Error","json","thetoken","console","log","catch","error","message"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport ReactDom from 'react-dom';\nimport App from './App'\n\nclass Login extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {login : '', password : ''}\n        this.handleLoginChange = this.changeLogin.bind(this);\n        this.handlePasswordChange = this.changePassword.bind(this);\n    }\n\n    changeLogin(event) {\n        this.setState({ login : event.target.value })\n    }\n\n    changePassword(event) {\n        this.setState({ password : event.target.value })\n    }\n\n    render () {\n        return (\n           \n            <form align=\"center\">\n                <h3>ES - Project #2</h3>\n                Login <input type=\"text\" value={this.state.login} onChange={this.handleLoginChange}/> <br/>\n                Password <input type=\"password\" value={this.state.password} onChange={this.handlePasswordChange}/> <br/>\n                <input type=\"button\" value=\"submit\" onClick={this.props.login.bind(this.props.parent, this.state.login, this.state.password)}/>\n            </form>\n        )\n    }\n}\n\nclass LoginPage extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {token : undefined, errormessage : undefined };\n    }\n\n    authenticated(token) {\n        this.setState({ token : token, errormessage : undefined })\n    }\n\n    failedauthenticated() {\n        this.setState({ token : undefined, errormessage : 'Authentication Error' })\n    }\n\n    doLogin(login, password) {\n        var theobject = this\n        var formparameters = {\n            method: 'POST', //para nao ficar visivel\n            body: JSON.stringify({'login' : login, 'password' : password}),\n            headers:{\n              'Content-Type': 'application/json'\n            }\n        }\n  fetch(this.props.loginserver, formparameters).then(function(data) {\n            if(data.status!==200) {\n                theobject.failedauthenticated()\n                throw new Error(data.status)\n            }\n            else {\n                var json = data.json();\n                return json;\n            }\n  }).then(function(thetoken) {\n            console.log('message =', thetoken)\n            if ('token' in thetoken)\n                theobject.authenticated(thetoken['token'])\n  }).catch(function(error) {\n            console.log('There has been a problem with your fetch operation: ', error.message);\n        });\n    }\n\n    render() {\n\n        console.log(this.state.token)\n        if (this.state.errormessage != undefined)\n            var errormessage = <h2>{this.state.errormessage}</h2>\n        else\n            var errormessage = <div/>\n        if (this.state.token == undefined)\n            return (\n                <div>\n                    {errormessage}\n                    <Login parent={this} login={this.doLogin}/>\n                </div>\n            )\n        else\n            return (\n                <App/>\n            )\n    }\n}\n\nexport default LoginPage;"]},"metadata":{},"sourceType":"module"}