{"ast":null,"code":"var _jsxFileName = \"/Users/renatosantos/Dropbox/Aplicativos/NONIO-Inforestudante/Licenciatura em Engenharia Informa\\u0301tica/2019 2020/2.\\xBA Semestre/Engenharia de Servic\\u0327os/Service-Engineering-Project/src/App.js\";\nimport React, { Component } from \"react\";\nimport './App.css';\nimport MicRecorder from 'mic-recorder-to-mp3';\nimport AWS from 'aws-sdk';\nimport SearchLocation from './SearchLocation';\nimport ReactDom from 'react-dom';\nimport { Redirect } from 'react-router-dom';\nimport AddressItem from './AddressItem';\nconst Mp3Recorder = new MicRecorder({\n  bitRate: 128\n});\nvar bucketName = \"proj-es-s3/Voice\";\nvar bucketRegion = \"us-east-1\";\nvar IdentityPoolId = \"us-east-1:4797cc31-91b9-4466-8732-8e4707b5cfbc\";\nAWS.config.update({\n  region: bucketRegion,\n  credentials: new AWS.CognitoIdentityCredentials({\n    IdentityPoolId: IdentityPoolId\n  })\n});\nvar s3 = new AWS.S3({\n  apiVersion: \"2006-03-01\",\n  params: {\n    Bucket: bucketName\n  }\n});\n\nfunction SearchLocationPage(props) {\n  if (!props.pesq) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"searching\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 5\n    }\n  }, \"Endere\\xE7os\");\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.start = () => {\n      if (this.state.isBlocked) {\n        console.log('Permission Denied');\n      } else {\n        Mp3Recorder.start().then(() => {\n          this.setState({\n            isRecording: true\n          });\n        }).catch(e => console.error(e));\n      }\n    };\n\n    this.stop = () => {\n      Mp3Recorder.stop().getMp3().then(([buffer, blob]) => {\n        const blobURL = URL.createObjectURL(blob);\n        this.setState({\n          blobURL,\n          isRecording: false\n        });\n        this.addAudio(blob);\n      }).catch(e => console.log(e));\n    };\n\n    this.addAudio = audio => {\n      console.log(audio);\n      var fileName = \"audio.mp3\";\n\n      if (!audio.size) {\n        return alert(\"No File to upload !!\");\n      }\n\n      var upload = new AWS.S3.ManagedUpload({\n        params: {\n          Bucket: bucketName,\n          Key: fileName,\n          Body: audio\n        }\n      });\n      var promise = upload.promise();\n      promise.then(function (data) {\n        alert(\"Audio inserido na Storage\");\n      }, function (err) {\n        return alert(\"ERROR: \", err.message);\n      });\n    };\n\n    this.state = {\n      isRecording: false,\n      blobURL: '',\n      isBlocked: false\n    };\n    this.state = {\n      showSearchLocation: false\n    };\n    this.goSearch = this.goSearch.bind(this);\n  }\n\n  componentDidMount() {\n    navigator.getUserMedia({\n      audio: true\n    }, () => {\n      console.log('Permission Granted');\n      this.setState({\n        isBlocked: false\n      });\n    }, () => {\n      console.log('Permission Denied');\n      this.setState({\n        isBlocked: true\n      });\n    });\n  }\n\n  goSearch() {\n    console.log('submiittt');\n    this.setState(state => ({\n      showSearchLocation: !state.showSearchLocation\n    }));\n  }\n  /*\n  onSubmit = () => {\n    console.log(\"submit\");\n    //return <Redirect  to=\"/SearchLocation/\" /> \n    return this.setState({ Redirect :  \"/SearchLocation\"})\n  }\n   state = { Redirect: null };\n  */\n\n\n  render() {\n    if (this.state.Redirect) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: this.state.Redirect,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 14\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"header\", {\n      className: \"App-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.start,\n      disabled: this.state.isRecording,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 11\n      }\n    }, \"Record\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.stop,\n      disabled: !this.state.isRecording,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 11\n      }\n    }, \"Stop\"), /*#__PURE__*/React.createElement(\"audio\", {\n      src: this.state.blobURL,\n      controls: \"controls\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(SearchLocationPage, {\n      pesq: this.state.showSearchLocation,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.goSearch,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }\n    }, \" \", this.state.showSearchLocation, \"Pesquisar enderecos!\")));\n  }\n\n} // app/src/AddressSuggest.js\n\n\nclass AddressSuggest extends Component {\n  render() {\n    return /*#__PURE__*/React.createElement(AddressItem, {\n      label: \"Address\",\n      value: this.props.query,\n      placeholder: \"start typing\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 7\n      }\n    });\n  }\n\n}\n\nclass AddressForm extends Component {\n  constructor(props) {\n    super(props);\n    const address = this.getEmptyAddress();\n    this.state = {\n      'address': address,\n      'query': '',\n      'locationId': ''\n    };\n    this.onQuery = this.onQuery.bind(this);\n  }\n\n  onQuery(evt) {\n    const query = evt.target.value;\n\n    if (!query.length > 0) {\n      const address = this.getEmptyAddress();\n      return this.setState({\n        'address': address,\n        'query': '',\n        'locationId': ''\n      });\n    }\n\n    const self = this;\n    axios.get('https://autocomplete.geocoder.api.here.com/6.2/geocode.json', {\n      'params': {\n        'app_id': 'devportal-demo-20180625',\n        'app_code': '9v2BkviRwi9Ot26kp2IysQ',\n        'query': query,\n        'maxresults': 1\n      }\n    }).then(function (response) {\n      const address = response.data.suggestions[0].address;\n      const id = response.data.suggestions[0].locationId;\n      self.setState({\n        'address': address,\n        'query': query,\n        'locationId': id\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      class: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(AddressSuggest, {\n      query: this.state.query,\n      onChange: this.onQuery,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(AddressInput, {\n      street: this.state.address.street,\n      city: this.state.address.city,\n      state: this.state.address.state,\n      postalCode: this.state.address.postalCode,\n      country: this.state.address.country,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }\n    }), \">\");\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/renatosantos/Dropbox/Aplicativos/NONIO-Inforestudante/Licenciatura em Engenharia Informática/2019 2020/2.º Semestre/Engenharia de Serviços/Service-Engineering-Project/src/App.js"],"names":["React","Component","MicRecorder","AWS","SearchLocation","ReactDom","Redirect","AddressItem","Mp3Recorder","bitRate","bucketName","bucketRegion","IdentityPoolId","config","update","region","credentials","CognitoIdentityCredentials","s3","S3","apiVersion","params","Bucket","SearchLocationPage","props","pesq","App","constructor","start","state","isBlocked","console","log","then","setState","isRecording","catch","e","error","stop","getMp3","buffer","blob","blobURL","URL","createObjectURL","addAudio","audio","fileName","size","alert","upload","ManagedUpload","Key","Body","promise","data","err","message","showSearchLocation","goSearch","bind","componentDidMount","navigator","getUserMedia","render","AddressSuggest","query","AddressForm","address","getEmptyAddress","onQuery","evt","target","value","length","self","axios","get","response","suggestions","id","locationId","street","city","postalCode","country"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport './App.css';\nimport MicRecorder from 'mic-recorder-to-mp3';\nimport AWS from 'aws-sdk';\nimport SearchLocation from './SearchLocation';\nimport ReactDom from 'react-dom';\nimport {Redirect} from 'react-router-dom';\nimport AddressItem from './AddressItem';\n\nconst Mp3Recorder = new MicRecorder({ bitRate: 128 });\n\nvar bucketName = \"proj-es-s3/Voice\";\nvar bucketRegion = \"us-east-1\";\nvar IdentityPoolId = \"us-east-1:4797cc31-91b9-4466-8732-8e4707b5cfbc\";\n\nAWS.config.update({\n    region: bucketRegion,\n    credentials: new AWS.CognitoIdentityCredentials({\n      IdentityPoolId: IdentityPoolId\n  })\n});\n\nvar s3 = new AWS.S3({\n  apiVersion: \"2006-03-01\",\n  params: { Bucket: bucketName }\n});\n\nfunction SearchLocationPage(props) {\n  if (!props.pesq) {\n    return null;\n  }\n\n  return (\n    <div className=\"searching\">\n      Endereços\n    </div>\n  );\n}\n\nclass App extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      isRecording: false,\n      blobURL: '',\n      isBlocked: false,\n    };\n    this.state = {showSearchLocation: false};\n    this.goSearch = this.goSearch.bind(this);\n  }\n\n  start = () => {\n    if (this.state.isBlocked) {\n      console.log('Permission Denied');\n    } else {\n      Mp3Recorder\n        .start()\n        .then(() => {\n          this.setState({ isRecording: true });\n        }).catch((e) => console.error(e));\n    }\n  };\n\n  stop = () => {\n    Mp3Recorder\n      .stop()\n      .getMp3()\n      .then(([buffer, blob]) => {\n        const blobURL = URL.createObjectURL(blob)\n        this.setState({ blobURL, isRecording: false });\n\n        this.addAudio(blob)\n      }).catch((e) => console.log(e));\n  };\n\n  componentDidMount() {\n    navigator.getUserMedia({ audio: true },\n      () => {\n        console.log('Permission Granted');\n        this.setState({ isBlocked: false });\n      },\n      () => {\n        console.log('Permission Denied');\n        this.setState({ isBlocked: true })\n      },\n    );\n  }\n\n  addAudio = (audio) => {\n    console.log(audio)\n    var fileName = \"audio.mp3\";\n    if(!audio.size) {\n      return alert(\"No File to upload !!\");\n    }\n    \n    var upload = new AWS.S3.ManagedUpload({\n      params: {\n        Bucket: bucketName,\n        Key: fileName,\n        Body: audio\n      }  \n    });\n\n    var promise = upload.promise();\n\n    promise.then(\n      function(data) {\n        alert(\"Audio inserido na Storage\");\n      },\n      function(err) {\n        return alert(\"ERROR: \", err.message);\n      }\n    )\n  }\n\n  goSearch(){\n      console.log('submiittt');\n      this.setState(state => ({\n        showSearchLocation: !state.showSearchLocation\n      }));\n  }\n\n  /*\n  onSubmit = () => {\n    console.log(\"submit\");\n    //return <Redirect  to=\"/SearchLocation/\" /> \n    return this.setState({ Redirect :  \"/SearchLocation\"})\n }\n\n  state = { Redirect: null };\n*/\n  render(){\n    if(this.state.Redirect){\n      return <Redirect to={this.state.Redirect} />\n    }\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <button onClick={this.start} disabled={this.state.isRecording}>Record</button>\n          <button onClick={this.stop} disabled={!this.state.isRecording}>Stop</button>\n          <audio src={this.state.blobURL} controls=\"controls\" />\n          \n          <SearchLocationPage pesq = {this.state.showSearchLocation}/>\n        <button onClick={this.goSearch}> {this.state.showSearchLocation}Pesquisar enderecos!</button>\n\n        </header>\n      </div>\n    );\n  }\n \n}\n\n \n// app/src/AddressSuggest.js\nclass AddressSuggest extends Component {\n  render() {\n    return (\n      <AddressItem label=\"Address\" value={this.props.query} placeholder=\"start typing\" />\n      );\n  }\n}\n\n\nclass AddressForm extends Component {\n  constructor(props) {\n    super(props);\n\n    const address = this.getEmptyAddress();\n    this.state = {\n      'address': address,\n      'query': '',\n      'locationId': ''\n    }\n\n    this.onQuery = this.onQuery.bind(this);\n  }\n\n  onQuery(evt) {\n    const query = evt.target.value;\n    if (!query.length > 0) {\n      const address = this.getEmptyAddress();\n      return this.setState({\n        'address': address,\n        'query': '',\n        'locationId': ''\n        })\n    }\n\n    const self = this;\n    axios.get('https://autocomplete.geocoder.api.here.com/6.2/geocode.json', {\n      'params': {\n        'app_id': 'devportal-demo-20180625',\n        'app_code': '9v2BkviRwi9Ot26kp2IysQ',\n        'query': query,\n        'maxresults': 1,\n      }}).then(function (response) {\n        const address = response.data.suggestions[0].address;\n        const id = response.data.suggestions[0].locationId;\n        self.setState({\n          'address': address,\n          'query': query,\n          'locationId': id,\n          });\n      });\n  }\n\n  render() {\n    return (\n      <div class=\"container\">\n        <AddressSuggest\n          query={this.state.query}\n          onChange={this.onQuery}\n          />\n        <AddressInput\n          street={this.state.address.street}\n          city={this.state.address.city}\n          state={this.state.address.state}\n          postalCode={this.state.address.postalCode}\n          country={this.state.address.country}\n          />\n        ></div>\n      );\n  }\n}\n\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}