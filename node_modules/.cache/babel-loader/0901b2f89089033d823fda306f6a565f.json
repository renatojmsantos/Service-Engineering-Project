{"ast":null,"code":"var _jsxFileName = \"E:\\\\GitHub\\\\ReactTest\\\\src\\\\counter.js\";\nimport React, { Component } from \"react\";\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      login: '',\n      password: ''\n    };\n    this.handleLoginChange = this.changeLogin.bind(this);\n    this.handlePasswordChange = this.changePassword.bind(this);\n  }\n\n  changeLogin(event) {\n    this.setState({\n      login: event.target.value\n    });\n  }\n\n  changePassword(event) {\n    this.setState({\n      password: event.target.value\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 13\n      }\n    }, \"Login \", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.login,\n      onChange: this.handleLoginChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 23\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 103\n      }\n    }), \"Password \", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      value: this.state.password,\n      onChange: this.handlePasswordChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 26\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 116\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"button\",\n      value: \"submit\",\n      onClick: this.props.login.bind(this.props.parent, this.state.login, this.state.password),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nclass Watch extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      date: ''\n    };\n  }\n\n  componentWillMount() {\n    var theobject = this;\n    console.log('this =', this);\n    console.log('this.props =', this.props);\n    fetch(this.props.timeserver, {\n      headers: {\n        'authorizationToken': JSON.stringify({\n          'token': this.props.token\n        })\n      }\n    }).then(data => data.json()).then(thedate => theobject.setState({\n      date: thedate\n    })).catch(function (error) {\n      console.log('There has been a problem with your fetch operation: ', error.message);\n    });\n  }\n\n  render() {\n    console.log('date =', this.state.date);\n    return /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 16\n      }\n    }, this.state.date);\n  }\n\n}\n\nclass Page extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: undefined,\n      errormessage: undefined\n    };\n  }\n\n  authenticated(token) {\n    this.setState({\n      token: token,\n      errormessage: undefined\n    });\n  }\n\n  failedauthenticated() {\n    this.setState({\n      token: undefined,\n      errormessage: 'Authentication Error'\n    });\n  }\n\n  doLogin(login, password) {\n    var theobject = this;\n    var formparameters = {\n      method: 'POST',\n      // or 'PUT'\n      body: JSON.stringify({\n        'login': login,\n        'password': password\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    fetch(this.props.loginserver, formparameters).then(function (data) {\n      if (data.status !== 200) {\n        theobject.failedauthenticated();\n        throw new Error(data.status);\n      } else {\n        var json = data.json();\n        return json;\n      }\n    }).then(function (thetoken) {\n      console.log('message =', thetoken);\n      if ('token' in thetoken) theobject.authenticated(thetoken['token']);\n    }).catch(function (error) {\n      console.log('There has been a problem with your fetch operation: ', error.message);\n    });\n  }\n\n  render() {\n    console.log(this.state.token);\n    if (this.state.errormessage != undefined) var errormessage = /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 32\n      }\n    }, this.state.errormessage);else var errormessage = /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 32\n      }\n    });\n    if (this.state.token == undefined) return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }\n    }, errormessage, /*#__PURE__*/React.createElement(Login, {\n      parent: this,\n      login: this.doLogin,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }\n    }));else return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }\n    }, errormessage, /*#__PURE__*/React.createElement(Watch, {\n      timeserver: this.props.timeserver,\n      token: this.state.token,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }\n    }));\n  }\n\n}\n\nexport default Page;","map":{"version":3,"sources":["E:/GitHub/ReactTest/src/counter.js"],"names":["React","Component","Login","constructor","props","state","login","password","handleLoginChange","changeLogin","bind","handlePasswordChange","changePassword","event","setState","target","value","render","parent","Watch","date","componentWillMount","theobject","console","log","fetch","timeserver","headers","JSON","stringify","token","then","data","json","thedate","catch","error","message","Page","undefined","errormessage","authenticated","failedauthenticated","doLogin","formparameters","method","body","loginserver","status","Error","thetoken"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nclass Login extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {login : '', password : ''}\r\n\r\n        this.handleLoginChange = this.changeLogin.bind(this);\r\n        this.handlePasswordChange = this.changePassword.bind(this);\r\n    }\r\n\r\n    changeLogin(event) {\r\n        this.setState({ login : event.target.value })\r\n    }\r\n\r\n    changePassword(event) {\r\n        this.setState({ password : event.target.value })\r\n    }\r\n\r\n    render () {\r\n        return (\r\n            <form>\r\n                Login <input type=\"text\" value={this.state.login} onChange={this.handleLoginChange}/> <br/>\r\n                Password <input type=\"password\" value={this.state.password} onChange={this.handlePasswordChange}/> <br/>\r\n                <input type=\"button\" value=\"submit\" onClick={this.props.login.bind(this.props.parent, this.state.login, this.state.password)}/>\r\n            </form>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nclass Watch extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {date : ''};\r\n    }\r\n\r\n    componentWillMount() {\r\n        var theobject = this\r\n        console.log('this =', this)\r\n        console.log('this.props =', this.props)\r\n  fetch(this.props.timeserver, {\r\n            headers:{\r\n              'authorizationToken' : JSON.stringify({ 'token' : this.props.token })\r\n            }\r\n        }).then(data => data.json())\r\n          .then(thedate => theobject.setState({date : thedate}))\r\n    .catch(function(error) {\r\n            console.log('There has been a problem with your fetch operation: ', error.message);\r\n           });\r\n    }\r\n\r\n    render() {\r\n        console.log('date =', this.state.date)\r\n        return <h2>{this.state.date}</h2>\r\n    }\r\n}\r\n\r\n\r\nclass Page extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {token : undefined, errormessage : undefined };\r\n    }\r\n\r\n    authenticated(token) {\r\n        this.setState({ token : token, errormessage : undefined })\r\n    }\r\n\r\n    failedauthenticated() {\r\n        this.setState({ token : undefined, errormessage : 'Authentication Error' })\r\n    }\r\n\r\n    doLogin(login, password) {\r\n        var theobject = this\r\n        var formparameters = {\r\n            method: 'POST', // or 'PUT'\r\n            body: JSON.stringify({'login' : login, 'password' : password}),\r\n            headers:{\r\n              'Content-Type': 'application/json'\r\n            }\r\n        }\r\n  fetch(this.props.loginserver, formparameters).then(function(data) {\r\n            if(data.status!==200) {\r\n                theobject.failedauthenticated()\r\n                throw new Error(data.status)\r\n            }\r\n            else {\r\n                var json = data.json();\r\n                return json;\r\n            }\r\n  }).then(function(thetoken) {\r\n            console.log('message =', thetoken)\r\n            if ('token' in thetoken)\r\n                theobject.authenticated(thetoken['token'])\r\n  }).catch(function(error) {\r\n            console.log('There has been a problem with your fetch operation: ', error.message);\r\n        });\r\n    }\r\n\r\n    render() {\r\n        console.log(this.state.token)\r\n        if (this.state.errormessage != undefined)\r\n            var errormessage = <h2>{this.state.errormessage}</h2>\r\n        else\r\n            var errormessage = <div/>\r\n        if (this.state.token == undefined)\r\n            return (\r\n                <div>\r\n                    {errormessage}\r\n                    <Login parent={this} login={this.doLogin}/>\r\n                </div>\r\n            )\r\n        else\r\n            return (\r\n                <div>\r\n                    {errormessage}\r\n                    <Watch timeserver={this.props.timeserver} token={this.state.token}/>\r\n                </div>\r\n            )\r\n    }\r\n}\r\n\r\nexport default Page;"]},"metadata":{},"sourceType":"module"}